apiVersion: v1
kind: ConfigMap
metadata:
  name: alertmanager-templates
  namespace: monitoring
data:
  slack.tmpl: |
    {{ define "slack.title" }}
    {{ if eq .Status "firing" }}ðŸ”¥{{ else }}âœ…{{ end }} {{ .GroupLabels.alertname }}
    {{ end }}
    
    {{ define "slack.text" }}
    {{ if eq .Status "firing" }}
    *Status:* ðŸ”´ FIRING
    {{ else }}
    *Status:* âœ… RESOLVED
    {{ end }}
    
    *Alert Details:*
    {{ range .Alerts }}
    â€¢ *Summary:* {{ .Annotations.summary }}
    â€¢ *Pod:* `{{ .Labels.pod }}`
    â€¢ *Namespace:* `{{ .Labels.namespace }}`
    â€¢ *Severity:* {{ .Labels.severity }}
    {{ if .Annotations.description }}
    â€¢ *Description:* {{ .Annotations.description }}
    {{ end }}
    {{ end }}
    
    *Runbook:* Check Grafana â†’ Business Metrics Dashboard
    *Time:* {{ .StartsAt.Format "2006-01-02 15:04:05" }}
    {{ end }}
